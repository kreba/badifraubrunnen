<% content_for :title, @title = t('people.index.title') %>
<% content_for :admin_links do %><li><%= link_to t('people.create.title'), new_person_path %></li><% end %>


<table id="people_list">
  <tr>
    <th><%=t 'person.attributes.name' %></th>
<% if current_person.has_role? 'admin' %>
  	<th>#<%=t 'assignments' %></th>
    <th><%=t 'person.attributes.preferences' %></th>
<% else %>
    <th><%=t 'person.attributes.phone' %></th>
    <th><%=t 'person.attributes.phone2' %></th>
    <th><%=t 'person.attributes.address' %></th>
<% end %>
  </tr>

<% for person in @people %>
  <tr>
    <td><%=h person.name %></td>
<% if current_person.has_role? 'admin' %>
  <% if current_person.administrates? person %>
  	<td><%=h person.shifts.size.to_s %>
  	<td><%=h person.preferences.to_s %>
    <td><%= link_to t('Edit'), edit_person_path(person) %></td>
    <td><%= link_to t('Delete'), person, :confirm => t('people.destroy.confirm'), :method => :delete %></td>
  <% end %>
<% else %>
    <td><%=h person.phone %></td>
    <td><%=h person.phone2 %></td>
    <td><%= render( :partial => 'address_link_if_complete', :locals => { :person => person }, :title => t('people.show_map') )%></td>
<% end %>
  </tr>
<% end %>
</table>
